<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="HandheldFriendly" content="true">
<meta name="copyright" content="© 2002–2015 Maxima CAS development team.">
<meta name="keywords" content="Maxima, CAS, computer algebra, mathematics, Lisp, symbolic computation, MACSYMA, GPL, free, ODE, plotting, система компьютерной алгебры, компьютерная алгебра, математика, символьные вычисления, свободно">
<title>Maxima - Руководства</title>
<!-- This site uses Bootstrap http://getbootstrap.com -->
<link rel="stylesheet" href="../css/bootstrap.min.css">
<link rel="shortcut icon" href="../i/favicon.ico" media="all">
<style type="text/css">
.mx-content {background:#f2f2f2;color:#333;padding: 0 1.5em 1.5em 1.5em;}
</style>
</head>
<body style="padding-top:50px;" id="top">
<a class="sr-only sr-only-focusable" href="#content">Перейти к основному содержанию</a>
<!-- Begin navigation bar -->
<header class="navbar navbar-inverse navbar-fixed-top" role="banner">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>                        
      </button>
      <a href="./index.html" class="navbar-brand" title="Перейти на
      главную страницу" style="padding: 0 0.75rem 0 1.5rem"><img
      src="../i/logo.png" width="56" height="56" alt="Maxima"></a>
    </div>
    <nav class="collapse navbar-collapse" id="myNavbar">
      <ul class="nav navbar-nav">
        <li><a href="../download.html">Загрузка</a></li>
        <li><a href="./documentation.html">Документация</a></li>
        <li><a href="../project.html" >проект</a></li>
        <li><a href="#top" >верх страницы</a></li>
      </ul>
    </nav>
  </div>
</header>
<!-- End navigation bar -->
<!-- Begin page -->
<div class="container-fluid">
  <!-- Begin content row -->
  <div class="row">
    <!-- Begin content column -->
    <div class="col-sm-9 col-md-8 mx-content" id="content">
      <h1>Тихон Тарнавский. Maxima. Графики и управляющие конструкции</h1>
      <p>Впервые было опубликовано в
      «<a href="http://www.linuxformat.ru/">Linux
      Format</a>» <a href="http://www.linuxformat.ru/download/85.pdf">№11 (85),
      ноябрь 2006 г</a>.</p>
      <h2>«А рисовать вы тоже умеете?» — «Рисовать? Кого-нибудь привлечем»</h2>
      <p>Как мы уже говорили в прошлый раз, количество различных
      функций в Maxima разработчики постарались свести к минимуму, а
      широту размаха каждой конкретной функции, соответственно, к
      максимуму. Соблюдается эта тенденция и в функциях построения
      графиков: основных таких функций всего две, с очевидными, как
      всегда, названиями — <code>plot2d</code> и <code>plot3d</code>
      (одно из значений слова <em>plot</em> — <em>график</em>, а
      аббревиатуры <em>2d</em> и <em>3d</em> переводятся
      как <em>двумерный</em> и <em>трехмерный</em>). Если говорить
      точнее, возможности графической отрисовки не встроены в Maxima,
      а реализованы посредством внешних программ, в чем и
      прослеживается пресловутый Unix-way: «одна задача — одна
      программа». По умолчанию, построением графиков
      занимается <code>gnuplot</code>, но кроме него есть
      разрабатываемый вместе с Maxima и идущий в ее же
      пакете <code>openmath</code>. Gnuplot необходимо установить
      (вручную либо автоматически — как зависимость Maxima) из
      пакета <code>gnuplot-nox</code>, либо
      просто <code>gnuplot</code>, а для работы <code>openmath</code>
      нужен командный интерпретатор <code>wish</code>, входящий обычно
      в пакет <code>tk</code>; и, начиная с версии 5.10.0, еще и
      xMaxima.</p> 
      <p>Теперь кратко — о возможностях. Начнем
      с <code>plot2d</code>. Кратчайший вариант ее вызова
      такой: <code>plot2d(выражение, [символ, начало, конец])</code>,
      где выражение задает функцию, график которой нужно построить,
      символ — неизвестное (он, понятное дело, должен быть
      единственным неопределенным символом, входящим в выражение), а
      начало и конец задают отрезок оси <code>Х</code> для построения
      графика; участок по оси <code>Y</code> в таком варианте записи
      выбирается автоматически, исходя из минимума и максимума функции
      на заданном промежутке. Обратите внимание, что неизвестное и
      концы промежутка нужно задавать не тремя отдельными параметрами,
      как, скажем, в <code>integrate</code>, а в виде списка. Это
      связано с тем, что <code>plot2d</code> может принимать еще и
      дополнительные аргументы — в таком случае они перечисляются
      следом за таким списком, что исключает всякую путаницу.</p> 
      <p>После вызова функции <code>plot2d</code> в таком варианте
      откроется окно <code>gnuplot</code>, в котором будет отображен
      затребованный график. Никакой интерактивной работы с полученным
      изображением <code>gnuplot</code> не предусматривает, кроме
      автоматического его масштабирования при изменении размеров
      окна. Насмотревшись вдоволь, можно закрыть окно с графиком
      клавишей <code>Q</code>, либо, в случае работы с Maxima в
      редакторе TeXmacs или wxMaxima, просто переключиться обратно в
      интерфейс, оставив окно <code>gnuplot</code> открытым, и
      продолжить работу:</p> 
      <div class="well" style="background: #fff;">
        <img class="img-responsive left-block"
        src="i/tarnavsky/5/maxima5-01.png" alt="">
      </div>
      <div class="well" style="background: #fff;">
        <img class="img-responsive center-block"
        src="i/tarnavsky/5/maxima5-02.png" alt="">
      </div>
      <div class="well" style="background: #fff;">
        <img class="img-responsive center-block"
        src="i/tarnavsky/5/maxima5-03.png" alt="">
      </div>
      <p>В некоторых случаях автоматический подбор отображаемого
      участка вертикальной оси может нас не устроить. Например, он
      работает не очень хорошо, если функция имеет на заданном
      промежутке точку разрыва, хотя бы один из односторонних пределов
      в которой равен бесконечности: тогда промежуток по
      оси <code>Y</code> будет выбран слишком большим. Да и в других
      случаях может понадобиться изменить умолчательное поведение. Для
      этого предусмотрен такой вариант вызова
      функции: <code>plot2d(выражение, [символ, начало, конец],
      [y, начало, конец])</code>. Здесь буква <code>y</code>
      используется в качестве обозначения вертикальной оси, а
      остальные два параметра имеют тот же смысл, что и выше.</p>
      <div class="well" style="background: #fff;">
        <img class="img-responsive left-block"
        src="i/tarnavsky/5/maxima5-04.png" alt="">
      </div>
      <div class="well" style="background: #fff;">
        <img class="img-responsive center-block"
        src="i/tarnavsky/5/maxima5-05.png" alt="">
      </div>
      <div class="well" style="background: #fff;">
        <img class="img-responsive center-block"
        src="i/tarnavsky/5/maxima5-06.png" alt="">
      </div>
      <p>Как видите, умолчательный вид графиков в <code>gnuplot</code>
      достаточно прост и даже аскетичен, но здесь можно очень и очень
      многое менять с помощью дополнительных опций. Некоторые из
      которых будут освещены чуть ниже, а остальные можно изучить по
      документации к <code>gnuplot</code>.</p>
      <p>Чтобы построить на одной и той же картинке одновременно два
      графика (или больше), просто передайте
      функции <code>plot2d</code> вместо отдельного выражения их
      список:</p>
      <div class="well" style="background: #fff;">
        <img class="img-responsive left-block"
        src="i/tarnavsky/5/maxima5-07.png" alt="">
      </div>
      <div class="well" style="background: #fff;">
        <img class="img-responsive center-block"
        src="i/tarnavsky/5/maxima5-08.png" alt="">
      </div>
      <p>Здесь <code>[x, 0.01, 5]</code> вместо <code>[x, 0, 5]</code>
      я написал «по привычке» — Maxima 5.9.x выдавала ошибку, если
      заданная функция была не определена на одном из концов
      интервала. В 5.10.0 мне эту ошибку воспроизвести не удалось; так
      что есть основания полагать, что поведение в таких случаях
      поправили.</p>
      <p>Может <code>plot2d</code> строить и графики параметрически
      заданных функций. Для этого используется список с ключевым
      словом <code>parametric</code>: <code>plot2d([parametric, x-выражение, y-выражение,
      [переменная, начало, конец],
      [nticks, количество]])</code>. Здесь <code>x-выражение</code>
      и <code>y-выражение</code> задают зависимость координат от
      параметра, то есть, по сути, это две функции
      вида <var>x</var>(<var>t</var>), <var>y</var>(<var>t</var>), где
      t — переменная параметризации. Эта же переменная должна
      фигурировать в следующем аргументе-списке, а
      параметры <code>начало</code>, <code>конец</code>, как и в двух
      других рассмотренных случаях, задают отрезок, в пределах
      которого этот параметр будет изменяться. Последний
      аргумент-список, с ключевым словом <code>nticks</code>, задает
      количество кусочков, на которые будет разбит интервал изменения
      параметра при построении графика. Этот аргумент опционален, но
      на практике он нужен почти всегда: умолчательное
      значение <code>nticks</code> равно <code>10</code>; согласитесь,
      редко бывает нужно в качестве графика получить ломаную из 10
      отрезков. Вот пример построения графика параметрической
      функции:</p>
      <div class="well" style="background: #fff;">
        <img class="img-responsive left-block"
        src="i/tarnavsky/5/maxima5-09.png" alt="">
      </div>
      <div class="well" style="background: #fff;">
        <img class="img-responsive center-block"
        src="i/tarnavsky/5/maxima5-10.png" alt="">
      </div>
      <p>Кроме <code>parametric</code>, функция <code>plot2d</code>
      понимает еще одно ключевое
      слово: <code>discrete</code>. Предназначено оно, как нетрудно
      догадаться, для отображения на плоскости дискретных множеств;
      точнее говоря, конечных наборов точек. По записи аргументов
      такой вариант распадается еще на
      два: <code>plot2d([discrete, x-список, y-список])</code>
      и <code>plot2d([discrete, [x, y]-список])</code>. В первом
      варианте координаты задаются как два отдельных
      списка <code>[x1, x2, …, xn], [y1, y2, ,…, yn]</code>, а во
      втором — как список пар координат отдельных
      точек <code>[[x1, y1], [x2, y2], …, [xn, yn]]</code>.</p> 
      <p>Если мы, к примеру, имеем набор статистических значений,
      зависящих от номера, мы можем отобразить его, задав в качестве
      x-координат сами эти номера, то есть натуральные числа:</p> 
      <div class="well" style="background: #fff;">
        <img class="img-responsive left-block"
        src="i/tarnavsky/5/maxima5-11.png" alt="">
      </div>
      <div class="well" style="background: #fff;">
        <img class="img-responsive center-block"
        src="i/tarnavsky/5/maxima5-12.png" alt="">
      </div>
      <p>По умолчанию множество отображается в виде ломаной с
      вершинами в заданных точках; такое поведение можно изменить и
      получить вывод, к примеру, в виде отдельных точек. Это
      достигается использованием специальных опций, применимых как
      к <code>plot2d</code>, так и к <code>plot3d</code>, поэтому
      давайте перейдем к рассмотрению последней.</p> 
      <h2>Придаем объем</h2>
      <p>Функция <code>plot3d</code> имеет два варианта вызова: один
      для явного задания функции и один для параметрического. В обоих
      случаях функция принимает три аргумента. Для явно заданной
      функции: <code>plot3d(выражение, [переменная1, начало, конец],
      [переменная2, начало, конец])</code>; аргументы
      аналогичны <code>plot2d</code>, с той разницей, что здесь
      независимых переменных две.</p>
      <div class="well" style="background: #fff;">
        <img class="img-responsive left-block"
        src="i/tarnavsky/5/maxima5-13.png" alt="">
      </div>
      <div class="well" style="background: #fff;">
        <img class="img-responsive center-block"
        src="i/tarnavsky/5/maxima5-14.png" alt="">
      </div>
      <p>Построение нескольких поверхностей на одном графике не
      поддерживается — потому, вероятно, что на таком рисунке
      проблематично было бы что-либо разглядеть. Посему для
      параметрически заданной функции ключевое слово parametric не
      требуется: вызов с первым аргументом-списком уже не с чем
      перепутать. График параметрически заданной функции строится
      так: <code>plot3d([выражение1, выражение2, выражение3],
      [переменная1, начало, конец], [переменная2, начало, конец])</code>,
      где <code>выражения</code> отвечают, по порядку,
      <var>x</var>(<var>u</var>, <var>v</var>),
      <var>y</var>(<var>u</var>, <var>v</var>),
      <var>z</var>(<var>u</var>, <var>v</var>).</p>
      <div class="well" style="background: #fff;">
        <img class="img-responsive left-block"
        src="i/tarnavsky/5/maxima5-15.png" alt="">
      </div>
      <div class="well" style="background: #fff;">
        <img class="img-responsive center-block"
        src="i/tarnavsky/5/maxima5-16.png" alt="">
      </div>
      <p>С помощью параметрической формы можно строить и
      пространственные кривые. Для этого просто нужно задать второй,
      фиктивный, параметр, чтобы Maxima не ругалась на неправильный
      синтаксис вызова функции:</p>
      <div class="well" style="background: #fff;">
        <img class="img-responsive left-block"
        src="i/tarnavsky/5/maxima5-17.png" alt="">
      </div>
      <div class="well" style="background: #fff;">
        <img class="img-responsive center-block"
        src="i/tarnavsky/5/maxima5-18.png" alt="">
      </div>
      <p>И отсюда мы плавно переходим к опциям функций построения
      графиков, посредством использованной выше
      опции <code>grid</code>. Каждая опция имеет некоторое
      умолчательное значение, а изменить его можно, добавив к
      аргументам список
      вида <code>[имя-опции, значение]</code>. Строго говоря,
      рассмотренные выше <code>y</code> и <code>nticks</code> также
      являются опциями; в предпоследнем примере мы задали
      опции <code>nticks</code> значение <code>120</code>, а в примере
      перед ним в качестве значения опции <code>y</code>
      использовалась пара чисел <code>0, 5</code>. В документации к
      Maxima символ <code>x</code>, выступавший в примерах выше в
      качестве обязательного параметра, также приводится как опция; на
      самом деле опцией он является только в
      случае <code>parametric</code> и действует тогда так же, как и
      опция <code>y</code>, только по другой
      оси. Опция <code>grid</code>, использованная выше, применима к
      трехмерным графикам вместо опции <code>nticks</code>,
      используемой для двумерных. Она, также как и <code>y</code>,
      задается в виде двух целых значений, которые для поверхностей
      задают размер ячеек сетки, в виде которой отображается
      поверхность; первое число — вдоль оси <var>X</var>, второе —
      вдоль оси <var>Y</var>; либо, в случае параметрического задания,
      по первому и по второму параметру соответственно. Для кривых из
      этих параметров действует только один, но писать нужно опять же
      оба, дабы не нарушать синтаксис; и здесь этот параметр имеет в
      точности тот же смысл, что <code>nticks</code> для кривых на
      плоскости. Но перейдем к другим опциям.</p>
      <h2>С претензией на красоту</h2>
      <p>Первая опция, которую мы рассмотрим, задает формат вывода
      результата; так она и
      называется: <code>plot_format</code>. Формат может принимать
      одно из четырех значений, первое из которых действует по
      умолчанию: <code>gnuplot</code>, <code>mgnuplot</code>,
      <code>openmath</code> и <code>ps</code>. В умолчательном варианте
      (значение <code>gnuplot</code>) данные для отображения
      передаются напрямую программе <code>gnuplot</code>, которая сама
      по себе имеет достаточно гибкое управление, и параметры ей можно
      передавать прямо из Maxima с помощью дополнительных опций
      функций <code>plot2d</code>/<code>3d</code>. Параметров этих
      настолько много, что <code>gnuplot</code> могла бы стать темой
      отдельной статьи; так что обращайтесь за ними к документации
      по <code>gnuplot</code>. В противовес своим богатым
      возможностям, <code>gnuplot</code> имеет перед следующими двумя
      интерфейсами (если откровенно — скорее, лишь перед одним из них)
      только один недостаток: она генерирует статичное изображение,
      тогда как <code>mgnuplot</code> и openmath позволяют в реальном
      времени масштабировать и передвигать картинку,
      а <code>plot3d</code> — еще и вращать линию или поверхность в
      разные стороны в пространстве.</p>
      <p>Следующий вариант — <code>mgnuplot</code> — является
      дополнительным интерфейсом к <code>gnuplot</code>, написанным на
      Tcl/Tk, но динамика у него настолько «задумчивая», а остальные
      возможности настолько бедны, что я не вижу смысла
      останавливаться на нем подробнее.</p>
      <p>И перехожу сразу к <code>openmath</code>. Он тоже не очень-то
      поддается управлению, зато предоставляет хорошую
      интерактивность, особенно ценную в трехмерном варианте: после
      того, как объект сгенерирован, его можно масштабировать и очень
      динамично вращать, разглядывая со всех сторон. Особенно это
      помогает для сложных поверхностей, когда, глядя на статичную
      «сетку» <code>gnuplot</code>, непросто понять форму
      поверхности. Справедливости ради нужно отметить,
      что <code>gnuplot</code> позволяет задавать точку обзора
      трехмерного объекта в качестве одного из многочисленных
      параметров, то есть хотя картинка и статична, но с какой стороны
      на нее смотреть, мы можем указать произвольно.</p>
      <p>Ну и последнее значение опции <code>plot_format</code>
      подталкивает Maxima к непосредственной генерации
      PostScript-документа с изображением. Но и здесь надо сказать:
      генерировать PostScript-вывод умеет и все тот
      же <code>gnuplot</code>.</p> 
      <p>Большинство остальных опций относятся только к формату
      вывода <code>gnuplot</code>. А мы рассмотрим еще одну
      универсальную, пригодную для всех форматов и преобразующую не
      результирующее изображение, а сам процесс построения графика;
      точнее, систему координат. Называется эта
      опция <code>transform_xy</code>, по умолчанию она
      равна <code>false</code>. Передавать ей нужно выражение,
      сгенерированное функцией <code>make_transform([x, y, z],
      f1(x, y, z), f2(x, y, z), f3(x, y, z))</code>. Кроме того,
      существует одно встроенное преобразование, известное
      как <code>polar_xy</code> и
      соответствующее <code>make_transform([r, th, z], r*cos(th),
      r*sin(th), z)</code>, то есть переходу к полярной цилиндрической
      системе координат. В качестве примера
      использования <code>transform_xy</code> приведу преобразование к
      полярным сферическим координатам, раз уж во встроенном виде его
      нет:</p>
      <div class="well" style="background: #fff;">
        <img class="img-responsive left-block"
        src="i/tarnavsky/5/maxima5-19.png" alt="">
      </div>
      <div class="well" style="background: #fff;">
        <img class="img-responsive center-block"
        src="i/tarnavsky/5/maxima5-20.png" alt="">
      </div>
      <p>Обратите внимание: в первом аргументе-списке к make_transform
      последним должен идти зависимый символ, то есть тот, который
      будет выступать функцией от двух других.</p>
      <p>Если вам нужно постоянно работать со сферическими
      координатами, можете задать,
      скажем, <code>spherical_xy:make_transform([t, f, r],
      r*sin(f)*sin(t), r*cos(f)*sin(t), r*cos(t))</code>, и затем при
      построении графиков писать [transform_xy,
      spherical_xy]. Ветвитесь и повторяйтесь До сих пор мы двигались
      только по прямой, а теперь поговорим о средствах «изменения
      траектории»: условном операторе и циклах.</p> 
      <p>Начнем с условия. В Maxima, в отличие от большинства
      «традиционных» процедурных и объектных языков программирования,
      где существует так называемый условный оператор, привычная
      связка <code>if</code>-<code>then</code>-<code>else</code>
      является не синтаксической конструкцией, а самым настоящим
      оператором. По своему действию он больше всего похож на
      тернарный оператор языка C, только с более «человеческим»
      синтаксисом: <code>if условие then выражение1 else выражение2</code>. При
      выполнении «условия» из двух «выражений» вычисляется только
      первое и возвращается как результат оператора; в противном
      случае выполняется только второе и оно же является значением
      всего выражения <code>if</code>-<code>then</code>-<code>else</code>.
      Часть конструкции <code>else выражение2</code>, как и в большинстве
      языков программирования, опциональна. Если ее нет, а условие
      все-таки не выполнилось, результат оператора <code>if</code>
      будет равен <code>false</code>.</p>
      <p>При этом, конечно же, никто вам не мешает использовать этот
      оператор как обычную условную конструкцию, а возвращаемое
      значение просто игнорировать. С другой стороны,
      оператор <code>if</code> можно применять, например, для задания
      рекурсивных последовательностей:</p>
      <div class="well" style="background: #fff;">
        <img class="img-responsive left-block"
        src="i/tarnavsky/5/maxima5-21.png" alt="">
      </div>
      <p>Немного о самих условиях, которые могут проверяться
      оператором <code>if</code>. Условия <code>&gt;</code>,
      <code>&lt;</code>, <code>&gt;=</code>, <code>&lt;=</code>
      записываются и расшифровываются традиционно, так же как и логические
      операторы <code>and</code>, <code>or</code>, <code>not</code>. А
      вот о равенствах-неравенствах нужно сказать пару слов. Равенство
      в Maxima есть двух видов: синтаксическое и
      логическое. Знаком <code>=</code> обозначается как раз первое, а
      второе вычисляется с помощью функции <code>equal()</code>. Чтобы
      не быть многословными, отличие синтаксического равенства от
      логического продемонстрируем на примере; здесь дополнительно
      используется предикат по имени <code>is</code>, которые
      проверяет на истинность свой аргумент.</p>
      <div class="well" style="background: #fff;">
        <img class="img-responsive left-block"
        src="i/tarnavsky/5/maxima5-22.png" alt="">
      </div>
      <p>Ну и неравенств, соответственно, тоже существует два, с тем
      же смыслом. Синтаксическое неравенство обозначается достаточно
      непривычно — через <code>#</code>; видимо, этот символ
      разработчики сочли наиболее визуально схожим со знаком ≠. Ну а
      логическое неравенство обозначено
      через <code>notequal()</code>.</p>
      <p>Конечно, кроме упомянутых сравнений в условном операторе
      можно использовать любые предикаты, то есть функции,
      возвращающие логические
      значения <code>true</code>/<code>false</code>. Функций таких
      достаточно много, но все они достаточно просты, поэтому не буду
      тратить время на их описание: его можно почерпнуть в том же
      объеме из документации.</p>
      <p>Напоследок перейдем к циклам. Цикл в Maxima будто бы тоже
      один. Но он имеет столько различных вариантов, что назвать это
      все одним оператором цикла язык не поворачивается. Вот как
      выглядят основные разновидности:</p>
      <ul>
        <li><code>for переменная:начало step шаг thru конец do
        выражение</code></li>
        <li><code>for переменная:начало step шаг while условие do
        выражение</code></li>
        <li><code>for переменная:начало step шаг unless условие do
        выражение</code></li>
      </ul>
      <p>Первый прокручивает цикл, изменяя <code>переменную</code> с
      заданным <code>шагом</code> от <code>начала</code>
      до <code>конца</code>; второй — от <code>начала</code> и пока
      выполняется <code>условие</code>; третий — наоборот,
      пока <code>условие</code> не выполняется. К примеру, мы можем
      получить список из первых десяти членов последовательности из
      позапрошлого примера:</p>
      <div class="well" style="background: #fff;">
        <img class="img-responsive left-block"
        src="i/tarnavsky/5/maxima5-23.png" alt="">
      </div>
      <p>Как видите, в качестве оператора цикл в простейшем его виде,
      в отличие от условия, использовать смысла нет, так как его
      возвращаемое значение всегда равно <code>done</code>. В этом
      примере один из элементов циклического оператора не указан; шаг,
      как видите, может быть опущен и по умолчанию равен
      единице. Самое интересное в этом операторе то, что опустить
      позволяется любую его часть, кроме <code>do</code>; и в том
      числе в любых комбинациях. К примеру, опустив
      кроме <code>step</code> еще и <code>for</code>, мы получаем из
      этого же оператора традиционные циклы <code>while</code>
      и <code>unless</code> (второй и третий варианты). А проделав то
      же самое с первым вариантом записи, получим цикл без счетчика
      вида <code>thru</code> число <code>do</code> выражение, который
      просто повторится заданное число раз. Можно, наоборот, опустить
      условие окончания и получить цикл с индексной переменной, но
      бесконечный. А оставив только <code>do</code>, получим самый
      простой вариант бесконечного цикла. Из таких бесконечных циклов
      можно выйти с помощью оператора <code>return(выражение)</code>
      (точнее, конечно, конструкции из двух операторов
      вида <code>if условие then return(выражение)</code>), который
      прервет выполнение цикла и вместо done вернет заданное
      выражение. Естественно, оператор <code>return()</code> можно
      применять во всех видах циклов, а не только в бесконечных.</p>
      <p>Но и это еще не все. Кроме всех уже рассмотренных вариаций,
      цикл может принимать еще две ипостаси. Во-первых,
      вместо <code>step</code> может использоваться
      конструкция <code>next выражение</code>, смысл которой лучше
      тоже продемонстрировать на примере</p>
      <div class="well" style="background: #fff;">
        <img class="img-responsive left-block"
        src="i/tarnavsky/5/maxima5-24.png" alt="">
      </div>
      <p>После <code>next</code> может стоять любое вычислимое
      выражение относительно индекса цикла, и применяться эта
      конструкция может во всех трех вариантах цикла
      (<code>thru</code>/<code>while</code>/<code>unless</code>).</p>
      <p>А «во-вторых» — это еще один отдельный вариант
      цикла: <code>for переменная in список do выражение</code>; либо
      расширенная
      форма: <code>for переменная in список условие do выражение</code>. Здесь
      цикл будет прокручен с <code>переменной</code>, изменяющейся по
      всем элементам <code>списка</code>; плюс можно задать еще и
      дополнительное <code>условие</code> на прерывание цикла. Вот
      теперь мы с циклами действительно закончили. Как видите, все
      достаточно разнообразно. Я, признаться, ничего, что здесь не
      реализовано, и придумать не смог.</p>
      <p>Но рассказ о циклах и условном операторе остается неполным,
      пока я не рассказал о группировке выражений — ведь в обычном
      варианте после <code>then</code> или <code>do</code> можно
      написать всего одно из них. А группировка, или, как ее принято
      называть, составной оператор, в Maxima — это опять-таки самый
      настоящий оператор, который тоже, как и положено оператору,
      возвращает некоторое значение. Обозначается он скобками, самыми
      что ни на есть круглыми и обыкновенными; а разделяются
      сгруппированные операторы/выражения внутри этих скобок не менее
      обыкновенными запятыми. Возвращаемым значением составного
      оператора является последнее вычисленное выражение.</p>
      <p>С условным оператором, столь разнообразными циклами и
      составным оператором мы уже можем, комбинируя их между собой и с
      любыми другими функциями и выражениями Maxima, писать
      полноценные программы с использованием богатого символьного
      математического аппарата. Естественно, теперь нам захочется
      сохранять эти программы в виде внешних файлов, чтобы не набирать
      их каждый раз вручную, а подгружать одной короткой командой. Об
      этом, а также о математических аналогах объявления переменных —
      в завершающей статье цикла.</p>
      <p>Мы также поговорим о математических аналогах объявления
      переменных и рассмотрим практические примеры с применением уже
      достаточно богатого известного нам инструментария.</p>
    </div>
    <!-- End content column -->
    <!-- Begin info and menu column -->
    <div class="col-sm-3 col-md-4 hidden-print">
      <!-- Begin menu list -->
      <ul class="nav nav-pills nav-stacked">
        <li><a href="./index.html">главная страница</a></li>
        <li class="dropdown active"><a class="dropdown-toggle"
        data-toggle="dropdown" href="./documentation.html">Документация
        <span class="caret"></span></a>
        <ul class="dropdown-menu">
          <li><a href="./documentation.html">Maxima Руководства</a></li>
          <li><a href="../faq.html">часто задаваемые вопросы</a></li>
          <li><a href="../compalg.html">Компьютерная алгебра</a></li>
          <li><a href="../lisp.html">Ссылки по Lisp</a></li>
        </ul>
        </li>
        <li class="dropdown"><a class="dropdown-toggle"
        data-toggle="dropdown" href="../project.html">проект
        <span class="caret"></span></a>
        <ul class="dropdown-menu">
          <li><a href="../project.html">проект Maxima</a></li>
          <li><a href="../3rdpartycode.html">Дополнительные пакеты</a></li>
          <li><a href="../relatedprojects.html">Связанные проекты</a></li>
        </ul>
        </li>
        <li><a href="../download.html">Загрузка</a></li>
        <li><a href="../maximalist.html">Списки рассылки</a></li>
      </ul>
      <!-- End menu list -->
    </div>
    <!-- End info and menu column -->
  </div>
  <!-- End content row -->
</div>
<!-- End page -->
<br>
<!-- Begin project info -->
<footer role="contentinfo">
  <div class="container-fluid">
    <div class="row">
      <div class="col-sm-9 col-md-8 text-center">
        <p>Вопросы о Maxima или этого сайта: <a href="../maximalist.html">Списки
        рассылки</a></p>
        <p><a href="https://sourceforge.net/projects/maxima" >организовано
        Sourceforge</a></p>
      </div>
    </div>
  </div>
</footer>
<!-- End project info -->
<!-- Scripts section -->
<script src="../js/jquery.min.js"></script>
<script src="../js/bootstrap.min.js"></script>
</body>
</html>
