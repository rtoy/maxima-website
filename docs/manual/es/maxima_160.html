<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 5.1, http://www.gnu.org/software/texinfo/ -->
<head>
<title>Manual de Maxima 5.46.0: Macros</title>

<meta name="description" content="Manual de Maxima 5.46.0: Macros">
<meta name="keywords" content="Manual de Maxima 5.46.0: Macros">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link href="maxima_toc.html#Top" rel="start" title="Top">
<link href="maxima_304.html#g_t_00cdndice-de-Funciones-y-Variables" rel="index" title="Índice de Funciones y Variables">
<link href="maxima_toc.html#SEC_Contents" rel="contents" title="&Iacute;ndice General">
<link href="maxima_157.html#Definici_00f3n-de-Funciones" rel="up" title="Definición de Funciones">
<link href="maxima_161.html#Funciones-y-variables-para-la-definici_00f3n-de-funciones" rel="next" title="Funciones y variables para la definición de funciones">
<link href="maxima_159.html#Funciones" rel="previous" title="Funciones">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.indentedblock {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smallindentedblock {margin-left: 3.2em; font-size: smaller}
div.smalllisp {margin-left: 3.2em}
kbd {font-style:oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nocodebreak {white-space:nowrap}
span.nolinebreak {white-space:nowrap}
span.roman {font-family:serif; font-weight:normal}
span.sansserif {font-family:sans-serif; font-weight:normal}
ul.no-bullet {list-style: none}
body {color: black; background: white;  margin-left: 8%; margin-right: 13%;
      font-family: "FreeSans", sans-serif}
h1 {font-size: 150%; font-family: "FreeSans", sans-serif}
h2 {font-size: 125%; font-family: "FreeSans", sans-serif}
h3 {font-size: 100%; font-family: "FreeSans", sans-serif}
a[href] {color: rgb(0,0,255); text-decoration: none;}
a[href]:hover {background: rgb(220,220,220);}
div.textbox {border: solid; border-width: thin; padding-top: 1em;
    padding-bottom: 1em; padding-left: 2em; padding-right: 2em}
div.titlebox {border: none; padding-top: 1em; padding-bottom: 1em;
    padding-left: 2em; padding-right: 2em; background: rgb(200,255,255);
    font-family: sans-serif}
div.synopsisbox {
    border: none; padding-top: 1em; padding-bottom: 1em; padding-left: 2em;
    padding-right: 2em; background: rgb(255,220,255);}
pre.example {border: 1px solid rgb(180,180,180); padding-top: 1em;
    padding-bottom: 1em; padding-left: 1em; padding-right: 1em;
    background-color: rgb(238,238,255)}
div.spacerbox {border: none; padding-top: 2em; padding-bottom: 2em}
div.image {margin: 0; padding: 1em; text-align: center}
div.categorybox {border: 1px solid gray; padding-top: 1em; padding-bottom: 1em;
    padding-left: 1em; padding-right: 1em; background: rgb(247,242,220)}
img {max-width:80%; max-height: 80%; display: block; margin-left: auto; margin-right: auto}

-->
</style>

<link rel="icon" href="figures/favicon.ico">

</head>

<body lang="es" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">
<a name="Macros"></a>
<div class="header">
<p>
Siguiente: <a href="maxima_161.html#Funciones-y-variables-para-la-definici_00f3n-de-funciones" accesskey="n" rel="next">Funciones y variables para la definición de funciones</a>, Previous: <a href="maxima_159.html#Funciones" accesskey="p" rel="previous">Funciones</a>, Subir: <a href="maxima_157.html#Definici_00f3n-de-Funciones" accesskey="u" rel="up">Definición de Funciones</a> &nbsp; [<a href="maxima_toc.html#SEC_Contents" title="&Iacute;ndice general" rel="contents">&Iacute;ndice general</a>][<a href="maxima_304.html#g_t_00cdndice-de-Funciones-y-Variables" title="&Iacute;ndice" rel="index">&Iacute;ndice</a>]</p>
</div>
<a name="Macros-1"></a>
<h3 class="section">36.3 Macros</h3>


<a name="Item_003a-Function_002ees_002fdeffn_002fbuildq"></a><dl>
<dt><a name="index-buildq"></a>Función: <strong>buildq</strong> <em>(<var>L</var>, <var>expr</var>)</em></dt>
<dd><p>Sustituye en paralelo las variables nombradas en la lista <var>L</var> en la expresión <var>expr</var>, sin evaluar ésta.
La expresión resultante se simplifica pero no se evalúa hasta que <code>buildq</code> termine de hacer las sustituciones.
</p>
<p>Los elementos de <var>L</var> son símbolos o expresiones de asignación del tipo <code><var>symbol</var>: <var>value</var></code>,
evaluadas en paralelo. Esto es, el valor de una variable en la parte derecha de una asignación es el valor que toma dicha variable en el contexto desde el que se invoca a <code>buildq</code>. En caso de que a una variable de <var>L</var> no se le haga una signación explícita, su valor en <code>buildq</code> es el mismo que tiene en el contexto desde el que se llama a <code>buildq</code>.
</p>
<p>Las variables referenciadas en <var>L</var> se sustituyen en <var>expr</var> en paralelo. Esto es, la sustitución para cada variable se determina antes de que se hagan las sustituciones, de forma que la sustitución de una variable no tiene efecto alguno sobre las otras.
</p>
<p>Si alguna variable <var>x</var> aparece como <code>splice (<var>x</var>)</code> en <var>expr</var>, entonces a <var>x</var> se le debe asignar una lista, la cual será interpolada en <var>expr</var> en lugar de hacer una simple sustitución; ver ejemplo más abajo.
</p>
<p>Cualesquiera otras variables de <var>expr</var> que no aparezcan en <var>L</var> se traspasan al resultado tal cual, incluso cuando tienen asignados valores en el contexto desde el que se llama a <code>buildq</code>.
</p>
<p>Ejemplos:
</p>
<p><code>a</code> queda asociada explícitamente a <code>x</code>, mientras que <code>b</code> tiene la misma asociación (29) que en el contexto de llamada y <code>c</code> es traspasado al resultado sin ser sustituido. La expresión resultante no se evalúa hasta que no se le obligue a ello mediante la evaluación explícita <code>''%</code>.
</p>
<div class="example">
<pre class="example">(%i1) (a: 17, b: 29, c: 1729)$
(%i2) buildq ([a: x, b], a + b + c);
(%o2)                      x + c + 29
(%i3) ''%;
(%o3)                       x + 1758
</pre></div>

<p>En este ejemplo, <code>e</code> se asocia a una lista, la cual aparece como tal en los argumentos de <code>foo</code> e interpolada en los argumentos de <code>bar</code>.
</p>
<div class="example">
<pre class="example">(%i1) buildq ([e: [a, b, c]], foo (x, e, y));
(%o1)                 foo(x, [a, b, c], y)
(%i2) buildq ([e: [a, b, c]], bar (x, splice (e), y));
(%o2)                  bar(x, a, b, c, y)
</pre></div>

<p>Como se ve a continuación, el resultado se simplifica tras las sustituciones. Si la simplificación se realizase antes que las sustituciones, ambos resultados serían iguales.
</p>
<div class="example">
<pre class="example">(%i1) buildq ([e: [a, b, c]], splice (e) + splice (e));
(%o1)                    2 c + 2 b + 2 a
(%i2) buildq ([e: [a, b, c]], 2 * splice (e));
(%o2)                        2 a b c
</pre></div>

<p>Las variables de <var>L</var> se asocian en paralelo; si se hiciese secuencialmente, el primer resultado sería <code>foo (b, b)</code>. Las sustituciones se llevan a cabo en paralelo. Compárese el segundo resultado con el resultado de <code>subst</code>, que hace las sustituciones de forma secuencial.
</p>
<div class="example">
<pre class="example">(%i1) buildq ([a: b, b: a], foo (a, b));
(%o1)                       foo(b, a)
(%i2) buildq ([u: v, v: w, w: x, x: y, y: z, z: u],
              bar (u, v, w, x, y, z));
(%o2)                 bar(v, w, x, y, z, u)
(%i3) subst ([u=v, v=w, w=x, x=y, y=z, z=u],
             bar (u, v, w, x, y, z));
(%o3)                 bar(u, u, u, u, u, u)
</pre></div>

<p>Se construye a continuación un sistema de ecuaciones con algunas variables o expresiones en el lado izquierdo y sus valores en el derecho; <code>macroexpand</code> muestra la expresión devuelta por <code>show_values</code>.
</p>
<div class="example">
<pre class="example">(%i1) show_values ([L]) ::= buildq ([L], map (&quot;=&quot;, 'L, L));
(%o1)   show_values([L]) ::= buildq([L], map(&quot;=&quot;, 'L, L))
(%i2) (a: 17, b: 29, c: 1729)$
(%i3) show_values (a, b, c - a - b);
(%o3)          [a = 17, b = 29, c - b - a = 1683]
(%i4) macroexpand (show_values (a, b, c - a - b));
(%o4)    map(=, '([a, b, c - b - a]), [a, b, c - b - a])
</pre></div>

<p>Dada una función con varios argumentos, se crea otra función
en la cual algunos argumentos son fijos.
</p>

<div class="example">
<pre class="example">(%i1) curry (f, [a]) :=
        buildq ([f, a], lambda ([[x]], apply (f, append (a, x))))$
(%i2) by3 : curry (&quot;*&quot;, 3);
(%o2)        lambda([[x]], apply(*, append([3], x)))
(%i3) by3 (a + b);
(%o3)                       3 (b + a)
</pre></div>
</dd></dl>



<a name="Item_003a-Function_002ees_002fdeffn_002fmacroexpand"></a><dl>
<dt><a name="index-macroexpand"></a>Función: <strong>macroexpand</strong> <em>(<var>expr</var>)</em></dt>
<dd><p>Devuelve la macroexpansión de <var>expr</var>, sin evaluarla,
cuando <code>expr</code> es una llamada a una función macro; en caso contrario,
<code>macroexpand</code> devuelve <var>expr</var>.
</p>
<p>Si la expansión de <var>expr</var> devuelve otra llamada a una función macro, esta llamada también se expande.
</p>
<p>La función <code>macroexpand</code> no evalúa su argumento.
Sin embargo, si la expansión de una llamada a función macro tiene efectos laterales, éstos se ejecutan.
</p>
<p>Véanse también <code>::=</code>, <code>macros</code> y <code>macroexpand1</code>.
</p>
<p>Ejemplos:
</p>
<div class="example">
<pre class="example">(%i1) g (x) ::= x / 99;
                                    x
(%o1)                      g(x) ::= --
                                    99
(%i2) h (x) ::= buildq ([x], g (x - a));
(%o2)            h(x) ::= buildq([x], g(x - a))
(%i3) a: 1234;
(%o3)                         1234
(%i4) macroexpand (h (y));
                              y - a
(%o4)                         -----
                               99
(%i5) h (y);
                            y - 1234
(%o5)                       --------
                               99
</pre></div>

</dd></dl>

<a name="Item_003a-Function_002ees_002fdeffn_002fmacroexpand1"></a><dl>
<dt><a name="index-macroexpand1"></a>Función: <strong>macroexpand1</strong> <em>(<var>expr</var>)</em></dt>
<dd><p>Devuelve la macroexpansión de <var>expr</var>, sin evaluarla,
cuando <code>expr</code> es una llamada a una función macro; en caso contrario,
<code>macroexpand1</code> devuelve <var>expr</var>.
</p>
<p>La función <code>macroexpand1</code> no evalúa su argumento.
Sin embargo, si la expansión de una llamada a función macro tiene efectos laterales, éstos se ejecutan.
</p>
<p>Si la expansión de <var>expr</var> devuelve otra llamada a una función macro, esta llamada no se expande.
</p>
<p>Véanse también <code>::=</code>, <code>macros</code> y <code>macroexpand</code>.
</p>
<p>Ejemplos:
</p>
<div class="example">
<pre class="example">(%i1) g (x) ::= x / 99;
                                    x
(%o1)                      g(x) ::= --
                                    99
(%i2) h (x) ::= buildq ([x], g (x - a));
(%o2)            h(x) ::= buildq([x], g(x - a))
(%i3) a: 1234;
(%o3)                         1234
(%i4) macroexpand1 (h (y));
(%o4)                       g(y - a)
(%i5) h (y);
                            y - 1234
(%o5)                       --------
                               99
</pre></div>

</dd></dl>

<a name="Item_003a-Function_002ees_002fdefvr_002fmacros"></a><dl>
<dt><a name="index-macros"></a>Variable global: <strong>macros</strong></dt>
<dd><p>Valor por defecto: <code>[]</code>
</p>
<p>La variable <code>macros</code> es la lista de las funciones macro definidas por el usuario.
El operador de definición de funciones macro <code>::=</code> coloca la nueva función macro en esta lista,
mientras que  <code>kill</code>, <code>remove</code> y <code>remfunction</code> eliminan las funciones macro de la lista.
</p>
<p>Véase también <code>infolists</code>.
</p>
</dd></dl>

<a name="Item_003a-Function_002ees_002fdeffn_002fsplice"></a><dl>
<dt><a name="index-splice"></a>Función: <strong>splice</strong> <em>(<var>a</var>)</em></dt>
<dd>
<p>Interpola la lista nombrada por el átomo  <var>a</var> dentro de una expresión, pero sólo si <code>splice</code> aparece dentro de <code>buildq</code>; en otro caso, <code>splice</code> se considera una función no definida. Si <var>a</var> aparece dentro de <code>buildq</code> sin <code>splice</code>, entonces queda sustituida por una lista dentro del resultado. El argumento de <code>splice</code> debe ser un átomo, no pudiendo ser una lista literal ni una expresión que devuelva una lista.
</p>
<p>Normalmente <code>splice</code> suministra los argumentos para una función u operador. Para una función <code>f</code>, la expresión <code>f (splice (<var>a</var>))</code> dentro de <code>buildq</code> se convierte en <code>f (<var>a</var>[1], <var>a</var>[2], <var>a</var>[3], ...)</code>. Dado un operador <code>o</code>, la expresión <code>&quot;o&quot; (splice (<var>a</var>)</code> dentro de <code>buildq</code> se convierte en 
<code>&quot;o&quot; (<var>a</var>[1], <var>a</var>[2], <var>a</var>[3], ...)</code>, donde <code>o</code> puede ser cualquier tipo de operador, normalmente uno que admita varios argumentos. Nótese que el operador debe ir encerrado entre comillas dobles <code>&quot;</code>.
</p>
<p>Ejemplos:
</p>
<div class="example">
<pre class="example">(%i1) buildq ([x: [1, %pi, z - y]], foo (splice (x)) / length (x));
                       foo(1, %pi, z - y)
(%o1)                -----------------------
                     length([1, %pi, z - y])
(%i2) buildq ([x: [1, %pi]], &quot;/&quot; (splice (x)));
                                1
(%o2)                          ---
                               %pi
(%i3) matchfix (&quot;&lt;&gt;&quot;, &quot;&lt;&gt;&quot;);
(%o3)                          &lt;&gt;
(%i4) buildq ([x: [1, %pi, z - y]], &quot;&lt;&gt;&quot; (splice (x)));
(%o4)                   &lt;&gt;1, %pi, z - y&lt;&gt;
</pre></div>

</dd></dl>

<a name="Item_003a-Function_002ees_002fnode_002fFunciones-y-variables-para-la-definici_00f3n-de-funciones"></a><hr>
<div class="header">
<p>
Siguiente: <a href="maxima_161.html#Funciones-y-variables-para-la-definici_00f3n-de-funciones" accesskey="n" rel="next">Funciones y variables para la definición de funciones</a>, Previous: <a href="maxima_159.html#Funciones" accesskey="p" rel="previous">Funciones</a>, Subir: <a href="maxima_157.html#Definici_00f3n-de-Funciones" accesskey="u" rel="up">Definición de Funciones</a> &nbsp; [<a href="maxima_toc.html#SEC_Contents" title="&Iacute;ndice general" rel="contents">&Iacute;ndice general</a>][<a href="maxima_304.html#g_t_00cdndice-de-Funciones-y-Variables" title="&Iacute;ndice" rel="index">&Iacute;ndice</a>]</p>
</div>



</body>
</html>
