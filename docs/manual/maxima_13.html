<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 6.8, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Functions and Variables for Numbers (Maxima 5.47.0 Manual)</title>

<meta name="description" content="Functions and Variables for Numbers (Maxima 5.47.0 Manual)">
<meta name="keywords" content="Functions and Variables for Numbers (Maxima 5.47.0 Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="maxima_toc.html" rel="start" title="Top">
<link href="maxima_423.html" rel="index" title="Function and Variable Index">
<link href="maxima_toc.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="maxima_11.html" rel="up" title="Numbers">
<link href="maxima_12.html" rel="prev" title="Introduction to Numbers">
<style type="text/css">
<!--
a.copiable-anchor {visibility: hidden; text-decoration: none; line-height: 0em}
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
span:hover a.copiable-anchor {visibility: visible}
ul.no-bullet {list-style: none}
body {color: black; background: white;  margin-left: 8%; margin-right: 13%;
      font-family: "FreeSans", sans-serif}
h1 {font-size: 150%; font-family: "FreeSans", sans-serif}
h2 {font-size: 125%; font-family: "FreeSans", sans-serif}
h3 {font-size: 100%; font-family: "FreeSans", sans-serif}
a[href] {color: rgb(0,0,255); text-decoration: none;}
a[href]:hover {background: rgb(220,220,220);}
div.textbox {border: solid; border-width: thin; padding-top: 1em;
    padding-bottom: 1em; padding-left: 2em; padding-right: 2em}
div.titlebox {border: none; padding-top: 1em; padding-bottom: 1em;
    padding-left: 2em; padding-right: 2em; background: rgb(200,255,255);
    font-family: sans-serif}
div.synopsisbox {
    border: none; padding-top: 1em; padding-bottom: 1em; padding-left: 2em;
    padding-right: 2em; background: rgb(255,220,255);}
pre.example {border: 1px solid rgb(180,180,180); padding-top: 1em;
    padding-bottom: 1em; padding-left: 1em; padding-right: 1em;
    background-color: rgb(238,238,255)}
div.spacerbox {border: none; padding-top: 2em; padding-bottom: 2em}
div.image {margin: 0; padding: 1em; text-align: center}
div.categorybox {border: 1px solid gray; padding-top: 1em; padding-bottom: 1em;
    padding-left: 1em; padding-right: 1em; background: rgb(247,242,220)}
img {max-width:80%; max-height: 80%; display: block; margin-left: auto; margin-right: auto}

-->
</style>

<link rel="icon" href="figures/favicon.ico">
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6>"></script>

</head>

<body lang="en">
<div class="subsection" id="Functions-and-Variables-for-Numbers">
<div class="header">
<p>
Previous: <a href="maxima_12.html" accesskey="p" rel="prev">Introduction to Numbers</a>, Up: <a href="maxima_11.html" accesskey="u" rel="up">Numbers</a> &nbsp; [<a href="maxima_toc.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="maxima_423.html" title="Index" rel="index">Index</a>]</p>
</div>
<span id="Functions-and-Variables-for-Numbers-1"></span><h4 class="subsection">5.1.2 Functions and Variables for Numbers</h4>

<span id="bfloat"></span><span id="Item_003a-DataTypes_002fdeffn_002fbfloat"></span><dl class="def">
<dt id="index-bfloat"><span class="category">Function: </span><span><strong>bfloat</strong> <em>(<var>expr</var>)</em><a href='#index-bfloat' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p><code>bfloat</code> replaces integers, rationals, floating point numbers, and some symbolic constants
in <var>expr</var> with bigfloat (variable-precision floating point) numbers.
</p>
<p>The constants <code>%e</code>, <code>%gamma</code>, <code>%phi</code>, and <code>%pi</code>
are replaced by a numerical approximation.
However, <code>%e</code> in <code>%e^x</code> is not replaced by a numeric value
unless <code>bfloat(x)</code> is a number.
</p>
<p><code>bfloat</code> also causes numerical evaluation of some built-in functions,
namely trigonometric functions, exponential functions, <code>abs</code>, and <code>log</code>.
</p>
<p>The number of significant digits in the resulting bigfloats is specified by the
global variable <code><a href="#fpprec">fpprec</a></code>.
Bigfloats already present in <var>expr</var> are replaced with values which have
precision specified by the current value of <code><a href="#fpprec">fpprec</a></code>.
</p>
<p>When <code><a href="#float2bf">float2bf</a></code> is <code>false</code>, a warning message is printed when
a floating point number is replaced by a bigfloat number with less precision.
</p>
<p>Examples:
</p>
<p><code>bfloat</code> replaces integers, rationals, floating point numbers, and some symbolic constants
in <var>expr</var> with bigfloat numbers.
</p>
<div class="example">
<pre class="example">(%i1) bfloat([123, 17/29, 1.75]);
(%o1)        [1.23b2, 5.862068965517241b-1, 1.75b0]
(%i2) bfloat([%e, %gamma, %phi, %pi]);
(%o2) [2.718281828459045b0, 5.772156649015329b-1, 
                        1.618033988749895b0, 3.141592653589793b0]
(%i3) bfloat((f(123) + g(h(17/29)))/(x + %gamma));
         1.0b0 (g(h(5.862068965517241b-1)) + f(1.23b2))
(%o3)    ----------------------------------------------
                    x + 5.772156649015329b-1
</pre></div>

<p><code>bfloat</code> also causes numerical evaluation of some built-in functions.
</p>
<div class="example">
<pre class="example">(%i1) bfloat(sin(17/29));
(%o1)                 5.532051841609784b-1
(%i2) bfloat(exp(%pi));
(%o2)                  2.314069263277927b1
(%i3) bfloat(abs(-%gamma));
(%o3)                 5.772156649015329b-1
(%i4) bfloat(log(%phi));
(%o4)                 4.812118250596035b-1
</pre></div>

<div class=categorybox>
Categories:
<a href="maxima_424.html#Category_003a-Numerical-evaluation">Numerical evaluation</a>
&middot;
</div>
</dd></dl>

<span id="bfloatp"></span><span id="Item_003a-DataTypes_002fdeffn_002fbfloatp"></span><dl class="def">
<dt id="index-bfloatp"><span class="category">Function: </span><span><strong>bfloatp</strong> <em>(<var>expr</var>)</em><a href='#index-bfloatp' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns <code>true</code> if <var>expr</var> is a bigfloat number, otherwise <code>false</code>.
</p>
<div class=categorybox>
Categories:
<a href="maxima_424.html#Category_003a-Numerical-evaluation">Numerical evaluation</a>
&middot;
<a href="maxima_424.html#Category_003a-Predicate-functions">Predicate functions</a>
&middot;
</div>
</dd></dl>

<span id="bftorat"></span><span id="Item_003a-DataTypes_002fdefvr_002fbftorat"></span><dl class="def">
<dt id="index-bftorat"><span class="category">Option variable: </span><span><strong>bftorat</strong><a href='#index-bftorat' class='copiable-anchor'> &para;</a></span></dt>
<dd><p>Default value: <code>false</code>
</p>
<p><code>bftorat</code> controls the conversion of bfloats to rational numbers.  When
<code>bftorat</code> is <code>false</code>, <code><a href="#ratepsilon">ratepsilon</a></code> will be used to control the
conversion (this results in relatively small rational numbers).  When
<code>bftorat</code> is <code>true</code>, the rational number generated will accurately
represent the bfloat.
</p>
<p>Note: <code>bftorat</code> has no effect on the transformation to rational numbers
with the function <code><a href="#rationalize">rationalize</a></code>.
</p>
<p>Example:
</p>
<div class="example">
<pre class="example">(%i1) ratepsilon:1e-4;
(%o1)                         1.0e-4
(%i2) rat(bfloat(11111/111111)), bftorat:false;
`rat' replaced 9.99990999991B-2 by 1/10 = 1.0B-1
                               1
(%o2)/R/                       --
                               10
(%i3) rat(bfloat(11111/111111)), bftorat:true;
`rat' replaced 9.99990999991B-2 by 11111/111111 = 9.99990999991B-2
                             11111
(%o3)/R/                     ------
                             111111
</pre></div>

<div class=categorybox>
Categories:
<a href="maxima_424.html#Category_003a-Numerical-evaluation">Numerical evaluation</a>
&middot;
</div>
</dd></dl>

<span id="bftrunc"></span><span id="Item_003a-DataTypes_002fdefvr_002fbftrunc"></span><dl class="def">
<dt id="index-bftrunc"><span class="category">Option variable: </span><span><strong>bftrunc</strong><a href='#index-bftrunc' class='copiable-anchor'> &para;</a></span></dt>
<dd><p>Default value: <code>true</code>
</p>
<p><code>bftrunc</code> causes trailing zeroes in non-zero bigfloat numbers not to be
displayed.  Thus, if <code>bftrunc</code> is <code>false</code>, <code>bfloat (1)</code>
displays as <code>1.000000000000000B0</code>.  Otherwise, this is displayed as
<code>1.0B0</code>.
</p>
<div class=categorybox>
Categories:
<a href="maxima_424.html#Category_003a-Numerical-evaluation">Numerical evaluation</a>
&middot;
</div>
</dd></dl>

<span id="bigfloat_005fbits"></span><span id="Item_003a-DataTypes_002fdeffn_002fbigfloat_005fbits"></span><dl class="def">
<dt id="index-bigfloat_005fbits"><span class="category">Function: </span><span><strong>bigfloat_bits</strong> <em>()</em><a href='#index-bigfloat_005fbits' class='copiable-anchor'> &para;</a></span></dt>
<dd><p>Returns the number of bits of precision in a bigfloat number.  This
value depends, of course, on the value of <code><a href="#fpprec">fpprec</a></code>. 
</p>
<div class="example">
<pre class="example">(%i1) fpprec:16;
(%o1)                                 16
(%i2) bigfloat_bits();
(%o2)                                 56
(%i3) fpprec:32;
(%o3)                                 32
(%i4) bigfloat_bits();
(%o4)                                 109
</pre></div>

<div class=categorybox>
Categories:
<a href="maxima_424.html#Category_003a-Numerical-evaluation">Numerical evaluation</a>
&middot;
</div>
</dd></dl>

<span id="bigfloat_005feps"></span><span id="Item_003a-DataTypes_002fdeffn_002fbigfloat_005feps"></span><dl class="def">
<dt id="index-bigfloat_005feps"><span class="category">Function: </span><span><strong>bigfloat_eps</strong> <em>()</em><a href='#index-bigfloat_005feps' class='copiable-anchor'> &para;</a></span></dt>
<dd><p>Returns the smallest bigfloat value, <code>eps</code>, such that
<code>1+eps</code> is not equal to 1.  The value depends on <code><a href="#fpprec">fpprec</a></code>,
of course.
</p>
<div class="example">
<pre class="example">(%i1) fpprec:16;
(%o1)                                 16
(%i2) bigfloat_eps();
(%o2)                        1.387778780781446b-17
(%i3) fpprec:32;
(%o3)                                 32
(%i4) bigfloat_eps();
(%o4)                1.5407439555097886824447823540679b-33
</pre></div>
<div class=categorybox>
Categories:
<a href="maxima_424.html#Category_003a-Numerical-evaluation">Numerical evaluation</a>
&middot;
</div>
</dd></dl>

<span id="decode_005ffloat"></span><span id="Item_003a-DataTypes_002fdeffn_002fdecode_005ffloat"></span><dl class="def">
<dt id="index-decode_005ffloat"><span class="category">Function: </span><span><strong>decode_float</strong> <em>(<var>f</var>)</em><a href='#index-decode_005ffloat' class='copiable-anchor'> &para;</a></span></dt>
<dd><p><code>decode_float</code> takes a float <var>f</var> and returns a list of three
values that characterizes <var>f</var>, which must be either a <code>float</code>
or <code>bfloat</code>.  The first value has the same type as <var>f</var>, but
is a number in the range <code>[1, 2)</code>.  The second value is an
exponent.  The third value is a float of the same type as <var>f</var> and
has the value of 1 if <var>f</var> is greater than or equal to 0;
otherwise, -1.
</p>
<p>If the returned list is <code>[mantissa, expo, sign]</code>, then
<code>scale_float(mantissa, exp)*sign</code> is identical to <var>f</var>.
</p>
<div class="example">
<pre class="example">(%i1) decode_float(4e0);
(%o1)                            [1.0, 2, 1.0]
(%i2) decode_float(4b0);
(%o2)                          [1.0b0, 2, 1.0b0]
(%i3) decode_float(%pi);

decode_float is only defined for floats and bfloats: %pi
 -- an error. To debug this try: debugmode(true);
(%i4) decode_float(float(%pi));
(%o4)                     [1.570796326794897, 1, 1.0]
(%i5) decode_float(1.1e-5);
(%o5)                        [1.441792, - 17, 1.0]
(%i6) %[1]*2^%[2];
(%o6)                               1.1e-5
</pre></div>

<p>This is a relatively simple interface to Common Lisp
<a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_dec_fl.htm">decode_float</a>.  However we return a signficand in the range
<code>[1,2)</code> instead of <code>[0.5, 1)</code>.  The former matches
IEEE-754.  Of course, this is extended to support bfloats.
</p>
<div class=categorybox>
Categories:
<a href="maxima_424.html#Category_003a-Numerical-evaluation">Numerical evaluation</a>
&middot;
</div>
</dd></dl>

<span id="evenp"></span><span id="Item_003a-DataTypes_002fdeffn_002fevenp"></span><dl class="def">
<dt id="index-evenp"><span class="category">Function: </span><span><strong>evenp</strong> <em>(<var>expr</var>)</em><a href='#index-evenp' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns <code>true</code> if <var>expr</var> is a literal even integer, otherwise
<code>false</code>.
</p>
<p><code>evenp</code> returns <code>false</code> if <var>expr</var> is a symbol, even if <var>expr</var>
is declared <code>even</code>.
</p>
<div class=categorybox>
Categories:
<a href="maxima_424.html#Category_003a-Predicate-functions">Predicate functions</a>
&middot;
</div>
</dd></dl>

<span id="float"></span><span id="Item_003a-DataTypes_002fdeffn_002ffloat"></span><dl class="def">
<dt id="index-float"><span class="category">Function: </span><span><strong>float</strong> <em>(<var>expr</var>)</em><a href='#index-float' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Converts integers, rational numbers and bigfloats in <var>expr</var> to floating
point numbers.  It is also an <code><a href="maxima_43.html#evflag">evflag</a></code>, <code>float</code> causes
non-integral rational numbers and bigfloat numbers to be converted to floating
point.
</p>
<div class=categorybox>
Categories:
<a href="maxima_424.html#Category_003a-Numerical-evaluation">Numerical evaluation</a>
&middot;
<a href="maxima_424.html#Category_003a-Evaluation-flags">Evaluation flags</a>
&middot;
</div>
</dd></dl>

<span id="float2bf"></span><span id="Item_003a-DataTypes_002fdefvr_002ffloat2bf"></span><dl class="def">
<dt id="index-float2bf"><span class="category">Option variable: </span><span><strong>float2bf</strong><a href='#index-float2bf' class='copiable-anchor'> &para;</a></span></dt>
<dd><p>Default value: <code>true</code>
</p> 
<p>When <code><a href="#float2bf">float2bf</a></code> is <code>false</code>, a warning message is printed when
a floating point number is replaced by a bigfloat number with less precision.
</p>
<div class=categorybox>
Categories:
<a href="maxima_424.html#Category_003a-Numerical-evaluation">Numerical evaluation</a>
&middot;
</div>
</dd></dl>

<span id="float_005fbits"></span><span id="Item_003a-DataTypes_002fdeffn_002ffloat_005fbits"></span><dl class="def">
<dt id="index-float_005fbits"><span class="category">Function: </span><span><strong>float_bits</strong> <em>()</em><a href='#index-float_005fbits' class='copiable-anchor'> &para;</a></span></dt>
<dd><p>Returns the number of bits of precision of a floating-point number.
</p>
<div class=categorybox>
Categories:
<a href="maxima_424.html#Category_003a-Numerical-evaluation">Numerical evaluation</a>
&middot;
</div>
</dd></dl>

<span id="float_005feps"></span><span id="Item_003a-DataTypes_002fdeffn_002ffloat_005feps"></span><dl class="def">
<dt id="index-float_005feps"><span class="category">Function: </span><span><strong>float_eps</strong> <em>()</em><a href='#index-float_005feps' class='copiable-anchor'> &para;</a></span></dt>
<dd><p>Returns the smallest floating-point value, <code>eps</code>, such that
<code>1+eps</code> is not equal to 1.
</p>
<div class=categorybox>
Categories:
<a href="maxima_424.html#Category_003a-Numerical-evaluation">Numerical evaluation</a>
&middot;
</div>
</dd></dl>

<span id="float_005fprecision"></span><span id="Item_003a-DataTypes_002fdeffn_002ffloat_005fprecision"></span><dl class="def">
<dt id="index-float_005fprecision"><span class="category">Function: </span><span><strong>float_precision</strong> <em>(<var>f</var>)</em><a href='#index-float_005fprecision' class='copiable-anchor'> &para;</a></span></dt>
<dd><p>Returns the number of bits of precision of a floating-point number,
which can be either a float or bigfloat.  This is basically the number
of bits used to represent the mantissa of a floating-point number.
For floats, this is 53 (for IEEE double-floats), but can be less when
denormal numbers occur.  For bigfloats, this is equal to
<code><a href="#fpprec">fpprec</a></code>, when converted from digits to bits.
</p>
<div class=categorybox>
Categories:
<a href="maxima_424.html#Category_003a-Numerical-evaluation">Numerical evaluation</a>
&middot;
</div>
</dd></dl>

<span id="floatnump"></span><span id="Item_003a-DataTypes_002fdeffn_002ffloatnump"></span><dl class="def">
<dt id="index-floatnump"><span class="category">Function: </span><span><strong>floatnump</strong> <em>(<var>expr</var>)</em><a href='#index-floatnump' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns <code>true</code> if <var>expr</var> is a floating point number, otherwise
<code>false</code>.
</p>
<div class=categorybox>
Categories:
<a href="maxima_424.html#Category_003a-Numerical-evaluation">Numerical evaluation</a>
&middot;
<a href="maxima_424.html#Category_003a-Predicate-functions">Predicate functions</a>
&middot;
</div>
</dd></dl>

<span id="fpprec"></span><span id="Item_003a-DataTypes_002fdefvr_002ffpprec"></span><dl class="def">
<dt id="index-fpprec"><span class="category">Option variable: </span><span><strong>fpprec</strong><a href='#index-fpprec' class='copiable-anchor'> &para;</a></span></dt>
<dd><p>Default value: 16
</p>
<p><code>fpprec</code> is the number of significant digits for arithmetic on bigfloat
numbers.  <code>fpprec</code> does not affect computations on ordinary floating point
numbers.
</p>
<p>See also <code><a href="#bfloat">bfloat</a></code> and <code><a href="#fpprintprec">fpprintprec</a></code>.
</p>
<div class=categorybox>
Categories:
<a href="maxima_424.html#Category_003a-Numerical-evaluation">Numerical evaluation</a>
&middot;
</div>
</dd></dl>

<span id="fpprintprec"></span><span id="Item_003a-DataTypes_002fdefvr_002ffpprintprec"></span><dl class="def">
<dt id="index-fpprintprec"><span class="category">Option variable: </span><span><strong>fpprintprec</strong><a href='#index-fpprintprec' class='copiable-anchor'> &para;</a></span></dt>
<dd><p>Default value: 0
</p>
<p><code>fpprintprec</code> is the number of digits to print when printing an ordinary
float or bigfloat number.
</p>
<p>For ordinary floating point numbers,
when <code>fpprintprec</code> has a value between 2 and 16 (inclusive),
the number of digits printed is equal to <code>fpprintprec</code>.
Otherwise, <code>fpprintprec</code> is 0, or greater than 16,
and the number is printed &quot;readably&quot;:
that is, it is printed with sufficient digits to exactly reconstruct the number on input.
</p>
<p>For bigfloat numbers,
when <code>fpprintprec</code> has a value between 2 and <code>fpprec</code> (inclusive),
the number of digits printed is equal to <code>fpprintprec</code>.
Otherwise, <code>fpprintprec</code> is 0, or greater than <code>fpprec</code>,
and the number of digits printed is equal to <code>fpprec</code>.
</p>
<p>For both ordinary floats and bigfloats,
trailing zero digits are suppressed.
The actual number of digits printed is less than <code>fpprintprec</code>
if there are trailing zero digits.
</p>
<p><code>fpprintprec</code> cannot be 1.
</p>
<div class=categorybox>
Categories:
<a href="maxima_424.html#Category_003a-Numerical-evaluation">Numerical evaluation</a>
&middot;
<a href="maxima_424.html#Category_003a-Display-flags-and-variables">Display flags and variables</a>
&middot;
</div>
</dd></dl>

<span id="integerp"></span><span id="Item_003a-DataTypes_002fdeffn_002fintegerp"></span><dl class="def">
<dt id="index-integerp"><span class="category">Function: </span><span><strong>integerp</strong> <em>(<var>expr</var>)</em><a href='#index-integerp' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns <code>true</code> if <var>expr</var> is a literal numeric integer, otherwise
<code>false</code>.
</p>
<p><code>integerp</code> returns <code>false</code> if <var>expr</var> is a symbol, even if <var>expr</var>
is declared <code>integer</code>.
</p>
<p>Examples:
</p>
<div class="example">
<pre class="example">(%i1) integerp (0);
(%o1)                         true
(%i2) integerp (1);
(%o2)                         true
(%i3) integerp (-17);
(%o3)                         true
(%i4) integerp (0.0);
(%o4)                         false
(%i5) integerp (1.0);
(%o5)                         false
(%i6) integerp (%pi);
(%o6)                         false
(%i7) integerp (n);
(%o7)                         false
(%i8) declare (n, integer);
(%o8)                         done
(%i9) integerp (n);
(%o9)                         false
</pre></div>

<div class=categorybox>
Categories:
<a href="maxima_424.html#Category_003a-Predicate-functions">Predicate functions</a>
&middot;
</div>
</dd></dl>

<span id="integer_005fdecode_005ffloat"></span><span id="Item_003a-DataTypes_002fdeffn_002finteger_005fdecode_005ffloat"></span><dl class="def">
<dt id="index-integer_005fdecode_005ffloat"><span class="category">Function: </span><span><strong>integer_decode_float</strong> <em>(<var>f</var>)</em><a href='#index-integer_005fdecode_005ffloat' class='copiable-anchor'> &para;</a></span></dt>
<dd><p><code>integer_decode_float</code> takes a float <var>f</var> and returns a list of three
values that characterizes <var>f</var>, which must be either a <code>float</code>
or <code>bfloat</code>.  The first value is an integer.  The second value is an
exponent.  The third value is 1 if <var>f</var> is positive or zero;
otherwise, -1.
</p>
<p>If the returned list is <code>[mantissa, expo, sign]</code>, then
<code>scale_float(fl(mantissa), expo)*sign</code> is identical to <var>f</var>.
Here, <code>fl</code> is either <code>float</code> or <code>bfloat</code> depending on
whether <var>f</var> is a <code>float</code> or a <code>bfloat</code>.
</p>
<div class="example">
<pre class="example">(%i1) integer_decode_float(4.0);
(%o1)                     [4503599627370496, - 50, 1]
(%i2) integer_decode_float(4b0);
(%o2)                    [36028797018963968, - 53, 1]
(%i3) scale_float(float(%o1[1]), %o1[2]);
(%o3)                                 4.0
(%i4) scale_float(bfloat(%o2[1]), %o2[2]);
(%o4)                                4.0b0
(%i5) integer_decode_float(4);

decode_float is only defined for floats and bfloats: 4
 -- an error. To debug this try: debugmode(true);
(%i6) integer_decode_float(1e-7);
(%o6)                     [7555786372591432, - 76, 1]
(%i7) integer_decode_float(1b-7);
(%o7)                    [60446290980731459, - 79, 1]
(%i8) scale_float(float(%o6[1]), %o6[2]);
(%o8)                               1.0e-7
</pre></div>

<p>For lisps that support denormal numbers, we have the following results.
</p><div class="example">
<pre class="example">(%i1) integer_decode_float(least_positive_float);
(%o1)                           [1, - 1074, 1]
(%i2) integer_decode_float(100*least_positive_float);
(%o2)                          [100, - 1074, 1]
(%i3) integer_decode_float(least_positive_normalized_float);
(%o3)                    [4503599627370496, - 1074, 1]
</pre></div>
<p>The number of bits in the integer part decreases as the denormal
number decreases.  Bfloat numbers do not have denormals because the
exponent is not bounded.
</p>
<p>This is a relatively simple interface to Common Lisp
<a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_dec_fl.htm">integer_decode_float</a>.  However, the integer part can vary depending
on the Lisp implementation; we return the same value, independent of
the Lisp implementation.  Of course, this is extended to support bfloats.
</p>
<div class=categorybox>
Categories:
<a href="maxima_424.html#Category_003a-Numerical-evaluation">Numerical evaluation</a>
&middot;
</div>
</dd></dl>

<span id="is_005fpower_005fof_005ftwo"></span><span id="Item_003a-DataTypes_002fdeffn_002fis_005fpower_005fof_005ftwo"></span><dl class="def">
<dt id="index-is_005fpower_005fof_005ftwo"><span class="category">Function: </span><span><strong>is_power_of_two</strong> <em>(<var>n</var>)</em><a href='#index-is_005fpower_005fof_005ftwo' class='copiable-anchor'> &para;</a></span></dt>
<dd><p><code>is_power_to_two</code> returns <code>true</code> if <var>n</var> is a power of
two and <code>false</code> otherwise.  <var>n</var> may be an integer, a
rational, a float, or a big float.
</p>
<p>Some examples:
</p><div class="example">
<pre class="example">(%i1) is_power_of_two(0);
(%o1)                                false
(%i2) is_power_of_two(4);
(%o2)                                true
(%i3) is_power_of_two(355/113);
(%o3)                                false
(%i4) is_power_of_two(1/32);
(%o4)                                true
(%i5) is_power_of_two(1048576);
(%o5)                                true
(%i6) is_power_of_two(1048575);
(%o6)                                false
(%i7) is_power_of_two(0.0);
(%o7)                                false
(%i8) is_power_of_two(1048576.0);
(%o8)                                true
(%i9) is_power_of_two(1048575.0);
(%o9)                                false
(%i10) is_power_of_two(1/256.0);
(%o10)                               true
(%i11) is_power_of_two(0b0);
(%o11)                               false
(%i12) is_power_of_two(1048576b0);
(%o12)                               true
(%i13) is_power_of_two(1048575b0);
(%o13)                               false
(%i14) is_power_of_two(1/256b0);
(%o14)                               true
</pre></div>

<div class=categorybox>
Categories:
<a href="maxima_424.html#Category_003a-Predicate-functions">Predicate functions</a>
&middot;
</div>
</dd></dl>

<span id="m1pbranch"></span><span id="Item_003a-DataTypes_002fdefvr_002fm1pbranch"></span><dl class="def">
<dt id="index-m1pbranch"><span class="category">Option variable: </span><span><strong>m1pbranch</strong><a href='#index-m1pbranch' class='copiable-anchor'> &para;</a></span></dt>
<dd><p>Default value: <code>false</code>
</p>
<p><code>m1pbranch</code> is the principal branch for <code>-1</code> to a power.
Quantities such as <code>(-1)^(1/3)</code> (that is, an &quot;odd&quot; rational exponent) and 
<code>(-1)^(1/4)</code> (that is, an &quot;even&quot; rational exponent) are handled as follows:
</p>
<div class="example">
<pre class="example">              domain:real
                            
(-1)^(1/3):      -1         
(-1)^(1/4):   (-1)^(1/4)   

             domain:complex              
m1pbranch:false          m1pbranch:true
(-1)^(1/3)               1/2+%i*sqrt(3)/2
(-1)^(1/4)              sqrt(2)/2+%i*sqrt(2)/2
</pre></div>

<div class=categorybox>
Categories:
<a href="maxima_424.html#Category_003a-Expressions">Expressions</a>
&middot;
<a href="maxima_424.html#Category_003a-Global-flags">Global flags</a>
&middot;
</div>
</dd></dl>

<span id="nonnegintegerp"></span><span id="Item_003a-DataTypes_002fdeffn_002fnonnegintegerp"></span><dl class="def">
<dt id="index-nonnegintegerp"><span class="category">Function: </span><span><strong>nonnegintegerp</strong> <em>(<var>n</var>)</em><a href='#index-nonnegintegerp' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Return <code>true</code> if and only if <code><var>n</var> &gt;= 0</code> and <var>n</var> is an integer.
</p>
<div class=categorybox>
Categories:
<a href="maxima_424.html#Category_003a-Predicate-functions">Predicate functions</a>
&middot;
</div>
</dd></dl>

<span id="numberp"></span><span id="Item_003a-DataTypes_002fdeffn_002fnumberp"></span><dl class="def">
<dt id="index-numberp"><span class="category">Function: </span><span><strong>numberp</strong> <em>(<var>expr</var>)</em><a href='#index-numberp' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns <code>true</code> if <var>expr</var> is a literal integer, rational number, 
floating point number, or bigfloat, otherwise <code>false</code>.
</p>
<p><code>numberp</code> returns <code>false</code> if <var>expr</var> is a symbol, even if <var>expr</var>
is a symbolic number such as <code>%pi</code> or <code>%i</code>, or declared to be
<code>even</code>, <code>odd</code>, <code>integer</code>, <code>rational</code>, <code>irrational</code>,
<code>real</code>, <code>imaginary</code>, or <code>complex</code>.
</p>
<p>Examples:
</p>
<div class="example">
<pre class="example">(%i1) numberp (42);
(%o1)                         true
(%i2) numberp (-13/19);
(%o2)                         true
(%i3) numberp (3.14159);
(%o3)                         true
(%i4) numberp (-1729b-4);
(%o4)                         true
(%i5) map (numberp, [%e, %pi, %i, %phi, inf, minf]);
(%o5)      [false, false, false, false, false, false]
(%i6) declare (a, even, b, odd, c, integer, d, rational,
     e, irrational, f, real, g, imaginary, h, complex);
(%o6)                         done
(%i7) map (numberp, [a, b, c, d, e, f, g, h]);
(%o7) [false, false, false, false, false, false, false, false]
</pre></div>

<div class=categorybox>
Categories:
<a href="maxima_424.html#Category_003a-Predicate-functions">Predicate functions</a>
&middot;
</div>
</dd></dl>


<span id="numer"></span><span id="Item_003a-DataTypes_002fdefvr_002fnumer"></span><dl class="def">
<dt id="index-numer"><span class="category">Option variable: </span><span><strong>numer</strong><a href='#index-numer' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p><code>numer</code> causes some mathematical functions (including exponentiation)
with numerical arguments to be evaluated in floating point.  It causes
variables in <code>expr</code> which have been given numerals to be replaced by
their values.  It also sets the <code><a href="#float">float</a></code> switch on.
</p>
<p>See also <code><a href="maxima_51.html#g_t_0025enumer">%enumer</a></code>.
</p>
<p>Examples:
</p>
<div class="example">
<pre class="example">(%i1) [sqrt(2), sin(1), 1/(1+sqrt(3))];
                                        1
(%o1)            [sqrt(2), sin(1), -----------]
                                   sqrt(3) + 1
</pre><pre class="example">(%i2) [sqrt(2), sin(1), 1/(1+sqrt(3))],numer;
(%o2) [1.414213562373095, 0.8414709848078965, 0.3660254037844387]
</pre></div>

<div class=categorybox>
Categories:
<a href="maxima_424.html#Category_003a-Numerical-evaluation">Numerical evaluation</a>
&middot;
<a href="maxima_424.html#Category_003a-Evaluation-flags">Evaluation flags</a>
&middot;
</div>
</dd></dl>

<span id="numer_005fpbranch"></span><span id="Item_003a-DataTypes_002fdefvr_002fnumer_005fpbranch"></span><dl class="def">
<dt id="index-numer_005fpbranch"><span class="category">Option variable: </span><span><strong>numer_pbranch</strong><a href='#index-numer_005fpbranch' class='copiable-anchor'> &para;</a></span></dt>
<dd><p>Default value: <code>false</code>
</p>
<p>The option variable <code>numer_pbranch</code> controls the numerical evaluation of 
the power of a negative integer, rational, or floating point number.  When
<code>numer_pbranch</code> is <code>true</code> and the exponent is a floating point number
or the option variable <code><a href="#numer">numer</a></code> is <code>true</code> too, Maxima evaluates
the numerical result using the principal branch.  Otherwise a simplified, but
not an evaluated result is returned.
</p>
<p>Examples:
</p>
<div class="example">
<pre class="example">(%i1) (-2)^0.75;
                                 0.75
(%o1)                       (- 2)
</pre><pre class="example">(%i2) (-2)^0.75,numer_pbranch:true;
(%o2)       1.189207115002721 %i - 1.189207115002721
</pre><pre class="example">(%i3) (-2)^(3/4);
                               3/4  3/4
(%o3)                     (- 1)    2
</pre><pre class="example">(%i4) (-2)^(3/4),numer;
                                          0.75
(%o4)              1.681792830507429 (- 1)
</pre><pre class="example">(%i5) (-2)^(3/4),numer,numer_pbranch:true;
(%o5)       1.189207115002721 %i - 1.189207115002721
</pre></div>

<div class=categorybox>
Categories:
<a href="maxima_424.html#Category_003a-Numerical-evaluation">Numerical evaluation</a>
&middot;
</div>
</dd></dl>


<span id="numerval"></span><span id="Item_003a-DataTypes_002fdeffn_002fnumerval"></span><dl class="def">
<dt id="index-numerval"><span class="category">Function: </span><span><strong>numerval</strong> <em>(<var>x_1</var>, <var>expr_1</var>, &hellip;, <var>var_n</var>, <var>expr_n</var>)</em><a href='#index-numerval' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Declares the variables <code>x_1</code>, &hellip;, <var>x_n</var> to have
numeric values equal to <code>expr_1</code>, &hellip;, <code>expr_n</code>.
The numeric value is evaluated and substituted for the variable
in any expressions in which the variable occurs if the <code>numer</code> flag is
<code>true</code>.  See also <code><a href="maxima_43.html#ev">ev</a></code>.
</p>
<p>The expressions <code>expr_1</code>, &hellip;, <code>expr_n</code> can be any expressions,
not necessarily numeric.
</p>
<div class=categorybox>
Categories:
<a href="maxima_424.html#Category_003a-Declarations-and-inferences">Declarations and inferences</a>
&middot;
<a href="maxima_424.html#Category_003a-Numerical-evaluation">Numerical evaluation</a>
&middot;
</div>
</dd></dl>

<span id="oddp"></span><span id="Item_003a-DataTypes_002fdeffn_002foddp"></span><dl class="def">
<dt id="index-oddp"><span class="category">Function: </span><span><strong>oddp</strong> <em>(<var>expr</var>)</em><a href='#index-oddp' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns <code>true</code> if <var>expr</var> is a literal odd integer, otherwise
<code>false</code>.
</p>
<p><code>oddp</code> returns <code>false</code> if <var>expr</var> is a symbol, even if <var>expr</var>
is declared <code>odd</code>.
</p>
<div class=categorybox>
Categories:
<a href="maxima_424.html#Category_003a-Predicate-functions">Predicate functions</a>
&middot;
</div>
</dd></dl>

<span id="ratepsilon"></span><span id="Item_003a-DataTypes_002fdefvr_002fratepsilon"></span><dl class="def">
<dt id="index-ratepsilon"><span class="category">Option variable: </span><span><strong>ratepsilon</strong><a href='#index-ratepsilon' class='copiable-anchor'> &para;</a></span></dt>
<dd><p>Default value: <code>2.0e-15</code>
</p>
<p><code>ratepsilon</code> is the tolerance used in the conversion
of floating point numbers to rational numbers, when the option variable
<code><a href="#bftorat">bftorat</a></code> has the value <code>false</code>.  See <code>bftorat</code> for an example.
</p>
<div class=categorybox>
Categories:
<a href="maxima_424.html#Category_003a-Numerical-evaluation">Numerical evaluation</a>
&middot;
<a href="maxima_424.html#Category_003a-Rational-expressions">Rational expressions</a>
&middot;
</div>
</dd></dl>

<span id="rationalize"></span><span id="Item_003a-DataTypes_002fdeffn_002frationalize"></span><dl class="def">
<dt id="index-rationalize"><span class="category">Function: </span><span><strong>rationalize</strong> <em>(<var>expr</var>)</em><a href='#index-rationalize' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Convert all double floats and big floats in the Maxima expression <var>expr</var> to
their exact rational equivalents.  If you are not familiar with the binary
representation of floating point numbers, you might be surprised that
<code>rationalize (0.1)</code> does not equal 1/10.  This behavior isn&rsquo;t special to
Maxima &ndash; the number 1/10 has a repeating, not a terminating, binary
representation.
</p>
<div class="example">
<pre class="example">(%i1) rationalize (0.5);
                                1
(%o1)                           -
                                2
</pre><pre class="example">(%i2) rationalize (0.1);
                        3602879701896397
(%o2)                   -----------------
                        36028797018963968
</pre><pre class="example">(%i3) fpprec : 5$
</pre><pre class="example">(%i4) rationalize (0.1b0);
                             209715
(%o4)                        -------
                             2097152
</pre><pre class="example">(%i5) fpprec : 20$
</pre><pre class="example">(%i6) rationalize (0.1b0);
                     236118324143482260685
(%o6)                ----------------------
                     2361183241434822606848
</pre><pre class="example">(%i7) rationalize (sin (0.1*x + 5.6));
               3602879701896397 x   3152519739159347
(%o7)      sin(------------------ + ----------------)
               36028797018963968    562949953421312
</pre></div>

<div class=categorybox>
Categories:
<a href="maxima_424.html#Category_003a-Numerical-evaluation">Numerical evaluation</a>
&middot;
</div>
</dd></dl>

<span id="ratnump"></span><span id="Item_003a-DataTypes_002fdeffn_002fratnump"></span><dl class="def">
<dt id="index-ratnump"><span class="category">Function: </span><span><strong>ratnump</strong> <em>(<var>expr</var>)</em><a href='#index-ratnump' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p>Returns <code>true</code> if <var>expr</var> is a literal integer or ratio of literal
integers, otherwise <code>false</code>.
</p>
<div class=categorybox>
Categories:
<a href="maxima_424.html#Category_003a-Predicate-functions">Predicate functions</a>
&middot;
<a href="maxima_424.html#Category_003a-Rational-expressions">Rational expressions</a>
&middot;
</div>
</dd></dl>

<span id="scale_005ffloat"></span><span id="Item_003a-DataTypes_002fdeffn_002fscale_005ffloat"></span><dl class="def">
<dt id="index-scale_005ffloat"><span class="category">Function: </span><span><strong>scale_float</strong> <em>(<var>f</var>, <var>n</var>)</em><a href='#index-scale_005ffloat' class='copiable-anchor'> &para;</a></span></dt>
<dd><p><code>scale_float</code> scales the float <var>f</var> by the value
<code>2^<var>n</var></code>.  This is done carefully so that no round-off every
occurs.  If <var>f</var> is a float, then it is possible to underflow to 0
or overflow, depending on the value of <var>f</var> and <var>n</var>.  Bigfloats
cannot underflow or overflow.
</p>
<div class="example">
<pre class="example">(%i1) scale_float(2d0, 2);
(%o1)                                 8.0
(%i2) scale_float(2d0, -2);
(%o2)                                 0.5
(%i3) scale_float(-2d0, -10);
(%o3)                            - 0.001953125
(%i4) scale_float(1d0, -2000);
(%o4)                                 0.0
(%i5) scale_float(2b0, 2);
(%o5)                                8.0b0
(%i6) scale_float(1b0, -2000);
(%o6)                       8.709809816217217b-603
(%i7) scale_float(1, 5);

scale_float: first arg must be a float or bfloat: 1
 -- an error. To debug this try: debugmode(true);
(%i8) scale_float(1.0, n);

scale_float: second arg must be an integer: n
 -- an error. To debug this try: debugmode(true);
</pre></div>

<p>This is a relatively simple interface to Common Lisp
<a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_dec_fl.htm">scale_float</a>.  Of course, this is extended to support bfloats.
</p>
</dd></dl>

<span id="unit_005fin_005flast_005fplace"></span><span id="Item_003a-DataTypes_002fdeffn_002funit_005fin_005flast_005fplase"></span><dl class="def">
<dt id="index-unit_005fin_005flast_005fplase"><span class="category">Function: </span><span><strong>unit_in_last_plase</strong> <em>(<var>n</var>)</em><a href='#index-unit_005fin_005flast_005fplase' class='copiable-anchor'> &para;</a></span></dt>
<dd>
<p><code>unit_in_last_place</code> returns a value that is the gap between
<var>n</var> and the nearest other number.  See, for example,
<a href="https://people.eecs.berkeley.edu/~wkahan/LOG10HAF.TXT">Kahan, FOOTNOTE 1</a>.  <code>unit_in_last_place</code> supports rational numbers,
floating-point numbers and bigfloat numbers.  For integer, the result
is always 1, and for rational numbers the result is always 0.
</p>
<p>The examples below assume
<a href="https://en.wikipedia.org/wiki/IEEE_754">IEEE-754</a> arithmetic that
supports
<a href="https://en.wikipedia.org/wiki/IEEE_754-1985#Denormalized_numbers">denormal</a>
numbers.  Some lisps like <a href="https://clisp.sourceforge.io/">Clisp</a>
do not have denormal numbers.
</p>
<div class="example">
<pre class="example">(%i1) unit_in_last_place(0);
(%o1)                                  1
(%i2) unit_in_last_place(-123);
(%o2)                                  1
(%i3) unit_in_last_place(2/3);
(%o3)                                  0
(%i4) unit_in_last_place(355/113);
(%o4)                                  0
(%i5) unit_in_last_place(0b0);
(%o5)                                0.0b0
(%i6) unit_in_last_place(0.0);
(%o6)                       4.940656458412465e-324
(%i7) unit_in_last_place(1.0);
(%o7)                        1.110223024625157e-16
(%i8) unit_in_last_place(1b0);
(%o8)                        1.387778780781446b-17
(%i9) unit_in_last_place(100.0);
(%o9)                         1.4210854715202e-14
(%i10) unit_in_last_place(100b0);
(%o10)                       1.77635683940025b-15
(%i11) fpprec:32;
(%o11)                                32
(%i12) unit_in_last_place(1b0);
(%o12)               1.5407439555097886824447823540679b-33
(%i13) unit_in_last_place(100b0);
(%o13)               1.972152263052529513529321413207b-31
</pre></div>

<div class=categorybox>
Categories:
<a href="maxima_424.html#Category_003a-Numerical-evaluation">Numerical evaluation</a>
&middot;
</div>

</dd></dl>

<span id="Item_003a-DataTypes_002fnode_002fStrings"></span></div>
<hr>
<div class="header">
<p>
Previous: <a href="maxima_12.html" accesskey="p" rel="prev">Introduction to Numbers</a>, Up: <a href="maxima_11.html" accesskey="u" rel="up">Numbers</a> &nbsp; [<a href="maxima_toc.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="maxima_423.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
